# Инструкции для агентов

- Вся коммуникация и любые создаваемые материалы (документация, ответы в PR, описания изменений) пишутся исключительно на русском языке.
- Используем только технологический стек на языке Rust.
- Относитесь к каждой задаче как к продакшн-работе: планируйте решение, держите рабочее дерево чистым и выполняйте задачи тщательно.
- Перед изменениями изучайте все релевантные `AGENTS.md` и документацию репозитория (`README`, спецификации, архитектурные описания).
- При противоречивых требованиях выбирайте наиболее продакшн-готовый вариант и фиксируйте обоснование; блокеры эскалируйте с конкретными деталями.
- Минимизируйте bespoke-код: предпочитайте зрелые зависимости, документируйте их выбор и изучайте документацию (`cargo doc --no-deps --open`) или исходники при необходимости.
- Проверяйте предположения фактами: используйте команды обнаружения, подтверждайте наличие инструментов.
- Для многошаговых задач составляйте краткий план и обновляйте его при изменениях; объясняйте отклонения от плана.
- Сначала ищите возможность переиспользовать существующие компоненты и зависимости, прежде чем писать новый код.
- Удаляйте мёртвый код, не подавляйте предупреждения; при необходимости изолируйте неиспользуемое через фичи. Пишите тесты для новой функциональности и исправлений.
- Следите за синхронизацией с `origin/main`; при появлении новых коммитов в базе перезапускайте работу от актуальной головы.
- Перед завершением задачи обязательно запускайте полный набор проверок:
  - `cargo fmt --all -- --check`
  - `cargo check --tests --benches`
  - `cargo clippy --all-targets --all-features -- -D warnings`
  - `cargo build --release`
  - `cargo test`
  - `cargo machete` (если установлен)
  Все ошибки необходимо устранить до успешного завершения.
- Устанавливайте недостающие инструменты (`rustup component add clippy rustfmt`). Все крейты должны использовать Rust edition 2024; при несоответствии обновляйте настройки сразу.
- Предпочитайте актуальные стабильные версии зависимостей и сверяйте ожидания по документации crates.io.
- Изменения в Rust-коде или GitHub workflows требуют полного локального прогона CI-пайплайна (форматирование, линтеры, тесты, сборка документации и спецскрипты). Документационные правки могут идти по облегчённой схеме, но пропущенные команды фиксируйте с пояснением.
- Любые сбои проверок или предупреждения (включая от `cargo machete`) рассматривайте как часть задачи и устраняйте до зелёного состояния.
- GitHub workflows рассматривайте как полноценный код: следуйте их `AGENTS.md`, контролируйте изменения и проверяйте свежие логи пайплайнов.
- Никогда не коммитьте разговорные ответы или произвольные Markdown-заметки без явного запроса на добавление в репозиторий.
- Markdown: заголовки через `#`, в код-блоках обязательно указывайте язык; имена файлов — в верхнем регистре с подчёркиваниями.
